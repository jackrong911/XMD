<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>寻梦岛服务器 - 维护中</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36CFC9',
                        dark: '#1D2129',
                        light: '#F2F3F5'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .animate-float {
                animation: float 6s ease-in-out infinite;
            }
            .bg-glass {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }
            .pulse-status {
                animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>

<body
    class="bg-gradient-to-br from-dark to-primary min-h-screen flex flex-col items-center justify-center text-white p-4 font-sans">
    <!-- 装饰性背景元素 -->
    <div class="fixed inset-0 overflow-hidden -z-10">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-primary/20 rounded-full blur-3xl animate-float"></div>
        <div class="absolute bottom-1/3 right-1/3 w-80 h-80 bg-secondary/20 rounded-full blur-3xl animate-float"
            style="animation-delay: 2s;"></div>
    </div>

    <div class="max-w-2xl w-full text-center">
        <!-- 维护图标 -->
        <div class="w-32 h-32 mx-auto mb-8 relative">
            <div class="absolute inset-0 bg-primary/30 rounded-full animate-pulse"></div>
            <i class="fa fa-wrench text-6xl relative z-10 flex items-center justify-center h-full text-secondary"></i>
        </div>

        <!-- 标题 -->
        <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-4 text-shadow">服务器维护中</h1>
        <p class="text-[clamp(1rem,2vw,1.25rem)] text-light/80 mb-8">
            我们正在进行必要的维护工作，以提供更好的游戏体验
        </p>

        <!-- 预计完成时间 -->
        <div class="bg-glass rounded-xl p-6 mb-8 border border-white/10">
            <h2 class="text-xl font-semibold mb-4">预计完成时间</h2>
            <div id="sync-status" class="text-sm mb-3 text-secondary/80 hidden">
                <i class="fa fa-refresh fa-spin mr-1"></i> 同步时间中...
            </div>
            <div class="flex flex-wrap justify-center gap-4 md:gap-6">
                <div class="bg-dark/50 rounded-lg p-3 md:p-4 min-w-[80px]">
                    <div id="hours" class="text-2xl md:text-3xl font-bold text-secondary">02</div>
                    <div class="text-sm text-light/70">小时</div>
                </div>
                <div class="bg-dark/50 rounded-lg p-3 md:p-4 min-w-[80px]">
                    <div id="minutes" class="text-2xl md:text-3xl font-bold text-secondary">45</div>
                    <div class="text-sm text-light/70">分钟</div>
                </div>
                <div class="bg-dark/50 rounded-lg p-3 md:p-4 min-w-[80px]">
                    <div id="seconds" class="text-2xl md:text-3xl font-bold text-secondary">18</div>
                    <div class="text-sm text-light/70">秒</div>
                </div>
            </div>
        </div>

        <!-- 维护原因 -->
        <div class="bg-glass rounded-xl p-6 mb-8 border border-white/10 text-left">
            <h3 class="text-lg font-semibold mb-3 flex items-center">
                <i class="fa fa-info-circle mr-2 text-secondary"></i>维护内容
            </h3>
            <ul class="space-y-2 text-light/80">
                <li class="flex items-start">
                    <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
                    <span>服务器性能优化与硬件升级</span>
                </li>
                <li class="flex items-start">
                    <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
                    <span>新增游戏功能与插件更新</span>
                </li>
                <li class="flex items-start">
                    <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
                    <span>安全补丁安装与漏洞修复</span>
                </li>
            </ul>
        </div>

        <!-- 联系方式 -->
        <div class="bg-glass rounded-xl p-6 border border-white/10">
            <h3 class="text-lg font-semibold mb-4">获取最新消息</h3>
            <div class="flex flex-wrap justify-center gap-4">
                <a href="mailto:3058753016@qq.com"
                    class="flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300">
                    <i class="fa fa-envelope"></i>
                    <span>发送邮件</span>
                </a>
                <a href="https://qm.qq.com/q/OyOPZTp5IW" target="_blank"
                    class="flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300">
                    <i class="fa fa-qq"></i>
                    <span>加入QQ群</span>
                </a>
            </div>
        </div>

        <!-- 页脚 -->
        <footer class="mt-12 text-light/60 text-sm">
            <p>&copy; 2025 Dream-seeking Island 寻梦岛 | 我的世界服务器</p>
        </footer>
    </div>

    <script>
        // 倒计时功能 - 多设备同步版本
        function initSyncCountdown() {
            // 显示同步状态
            const syncStatus = document.getElementById('sync-status');
            syncStatus.classList.remove('hidden');

            // 获取服务器端的维护结束时间
            function getServerEndTime() {
                // 请求同目录下的PHP文件获取时间
                return fetch('maintenance-time.php')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('获取时间失败');
                        }
                        return response.json();
                    })
                    .then(data => new Date(data.endTime));
            }

            // 获取服务器时间并初始化倒计时
            getServerEndTime().then(endTime => {
                // 隐藏同步状态
                syncStatus.classList.add('hidden');

                // 更新倒计时的函数
                function updateCountdown() {
                    const now = new Date();
                    const diff = endTime - now;

                    // 如果倒计时结束
                    if (diff <= 0) {
                        document.getElementById('hours').textContent = '00';
                        document.getElementById('minutes').textContent = '00';
                        document.getElementById('seconds').textContent = '00';
                        return;
                    }

                    // 计算时、分、秒
                    const hours = Math.floor(diff / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                    // 更新显示，确保两位数格式
                    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                }

                // 立即更新一次
                updateCountdown();
                // 每秒更新一次
                setInterval(updateCountdown, 1000);
            }).catch(error => {
                console.error('获取服务器时间失败:', error);
                syncStatus.innerHTML = '<i class="fa fa-exclamation-triangle mr-1"></i> 时间同步失败，使用本地时间';
                syncStatus.classList.remove('text-secondary/80');
                syncStatus.classList.add('text-yellow-400');

                // 失败时回退到本地时间模式
                fallbackToLocalCountdown();
            });
        }

        // 本地倒计时作为备用方案
        function fallbackToLocalCountdown() {
            let endTimeStr = localStorage.getItem('maintenanceEndTime');
            let endTime;

            if (!endTimeStr) {
                endTime = new Date();
                endTime.setHours(endTime.getHours() + 2);
                endTime.setMinutes(endTime.getMinutes() + 45);
                localStorage.setItem('maintenanceEndTime', endTime.toISOString());
            } else {
                endTime = new Date(endTimeStr);

                if (endTime <= new Date()) {
                    endTime = new Date();
                    endTime.setHours(endTime.getHours() + 2);
                    endTime.setMinutes(endTime.getMinutes() + 45);
                    localStorage.setItem('maintenanceEndTime', endTime.toISOString());
                }
            }

            function update() {
                const now = new Date();
                const diff = endTime - now;

                if (diff <= 0) {
                    document.getElementById('hours').textContent = '00';
                    document.getElementById('minutes').textContent = '00';
                    document.getElementById('seconds').textContent = '00';
                    localStorage.removeItem('maintenanceEndTime');
                    return;
                }

                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            }

            update();
            setInterval(update, 1000);
        }

        // 页面加载完成后初始化同步倒计时
        window.addEventListener('load', initSyncCountdown);
    </script>
</body>

</html>